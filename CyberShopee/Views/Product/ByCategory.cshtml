@model CyberShopee.ViewModels.ProducCategory.ProductCategoryViewModel;

@{
    // Normalize category string
    string category = (Model.Category ?? "").ToLower().Trim();
    string bgImage = "/images/bg.png"; // Default fallback

    if (category.Contains("electronics"))
        bgImage = "/images/Electronics.png";

    else if (category.Contains("home") && category.Contains("kitchen"))
        bgImage = "/images/Kitchen.png";

    else if (category.Contains("toy"))
        bgImage = "/images/Toys.png";

    else if (category.Contains("fashion"))
        bgImage = "/images/Fashion.png";

    else if (category.Contains("sports"))
        bgImage = "/images/Sports_Outdoors.jpg";

    else if (category.Contains("beauty"))
        bgImage = "/images/Beauty.png";

    else if (category.Contains("automotive"))
        bgImage = "/images/Automatives.png";

    else if (category.Contains("health"))
        bgImage = "/images/Health.png";

    else if (category.Contains("office"))
        bgImage = "/images/Office.jpg";
}

<!DOCTYPE html>
<html lang="en">
<head>

    

    <style>

        @@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');
        @@keyframes fadeIn {
            from

        {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }

        }

        /* ====== CyberShopee Dark‑Purple Navbar Palette ====== */
        :root {
            --nav-left: #0C0B17; /* very dark */
            --nav-mid: #1B1538; /* deep indigo */
            --nav-right: #3C2E8F; /* royal purple */
            --nav-line: #6F63D6; /* thin underline accent */

            --ink-100: #EDEBFF;
            --ink-300: #C9C6F5;
            --ink-500: #9CA3C7;
            --ink-700: #DDE1FF; /* light text on dark */
            --ink-900: #0F1220;
            --card-bg: rgba(20, 18, 40, 0.65);
            --card-stroke: rgba(111, 99, 214, 0.35);
            --card-wash-1: rgba(111, 99, 214, 0.18);
            --card-wash-2: rgba(60, 46, 143, 0.16);
            --cta-1: #6F63D6; /* button gradient top */
            --cta-2: #4C3FBA; /* button gradient bottom */

            --shadow-1: 0 12px 28px rgba(0,0,0,0.35);
            --shadow-1-hover: 0 18px 36px rgba(0,0,0,0.45);
            --anim-speed: 14s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        html, body {
            margin: 0 !important;
            padding: 0 !important;
            width: 100% !important;
            max-width: 100% !important;
            overflow-x: hidden !important;
            /* Page background matches your header gradient */
            background: linear-gradient(135deg, var(--nav-left), var(--nav-mid) 50%, var(--nav-right) 100%);
            background-attachment: fixed;
            color: var(--ink-700);
        }

        /* ===== Section uses your chosen category image with dark overlay ===== */
        .category-section {
            width: 100vw;
            margin-left: calc(-50vw + 50%);
            margin-right: calc(-50vw + 50%);
            padding: 3rem 0;
            min-height: 100vh;
            background: linear-gradient(135deg, rgba(12,11,23,.75), rgba(27,21,56,.72) 55%, rgba(60,46,143,.68)), url('@bgImage') center/cover no-repeat;
            position: relative;
        }

            /* Thin purple underline like the navbar edge */
            .category-section::after {
                content: "";
                position: absolute;
                left: 0;
                right: 0;
                bottom: 0;
                height: 2px;
                background: linear-gradient(90deg, transparent 0 6%, var(--nav-line) 20% 80%, transparent 94% 100%);
                opacity: .9;
                pointer-events: none;
            }

        /* ===== Title ===== */
        .category-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 0 3px 14px rgba(0,0,0,.45);
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            padding-bottom: 1rem;
        }

            .category-title::after {
                content: '';
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                bottom: 0;
                width: 140px;
                height: 4px;
                background: linear-gradient(90deg, var(--nav-left), var(--nav-right));
                border-radius: 999px;
                box-shadow: 0 0 12px rgba(111,99,214,.55);
            }

        /* ===== Grid (same sizing as your code) ===== */
        .products-grid {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 1rem;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }

        /* ===== Card: same size; dark‑purple glass look + subtle animations ===== */
        .product-card {
            position: relative;
            background: linear-gradient(180deg, var(--card-bg), rgba(12,11,23,0.55));
            border-radius: 18px;
            overflow: hidden;
            padding-bottom: 1rem;
            border: 1px solid var(--card-stroke);
            box-shadow: var(--shadow-1);
            backdrop-filter: blur(8px);
            transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease, filter .25s ease;
            animation: fadeIn .6s ease-out;
            /* gentle purple wash inside the card */
            background-image: radial-gradient(120% 120% at 0% 0%, var(--card-wash-1), transparent 60%), radial-gradient(100% 100% at 100% 0%, var(--card-wash-2), transparent 55%);
            background-blend-mode: soft-light, normal;
        }

            /* top accent line */
            .product-card::before {
                content: "";
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                height: 3px;
                background: linear-gradient(90deg, var(--nav-left), var(--nav-right));
                opacity: .95;
            }

            /* moving sheen */
            .product-card::after {
                content: "";
                position: absolute;
                inset: -40% -20%;
                background: conic-gradient(from 180deg at 50% 50%, transparent 0 20%, rgba(255,255,255,.15) 21% 28%, transparent 29% 100%);
                transform: translateX(-25%);
                animation: sweep var(--anim-speed) linear infinite;
                pointer-events: none;
                mix-blend-mode: soft-light;
            }

            .product-card:hover {
                transform: translateY(-8px);
                box-shadow: var(--shadow-1-hover);
                border-color: rgba(111,99,214,.55);
                filter: saturate(108%);
            }

        /* ===== Image frame (same dimensions) ===== */
        .product-image-container {
            position: relative;
            width: 100%;
            padding-top: 70%;
            background: linear-gradient(180deg, rgba(111,99,214,.18), rgba(60,46,143,.18));
            border-bottom: 3px solid rgba(111,99,214,.6);
        }

        .product-image {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ===== Details ===== */
        .product-details {
            padding: 1.5rem;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--ink-100);
            margin-bottom: 0.75rem;
            transition: color .25s ease;
        }

            .product-name:hover {
                color: var(--ink-300);
            }

        .product-description {
            color: var(--ink-500);
            font-size: 0.95rem;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-price {
            font-size: 1.25rem;
            font-weight: 800;
            color: #C9C6F5;
            margin-top: auto;
            margin-bottom: 1.5rem;
        }

        /* ===== CTA button in the same purple family ===== */
        .add-to-cart-btn {
            background: linear-gradient(180deg, var(--cta-1), var(--cta-2));
            color: var(--ink-100);
            border: 1px solid rgba(111,99,214,.6);
            padding: 0.75rem 2rem;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 6px 18px rgba(0,0,0,.35);
            transition: transform .05s ease, filter .2s ease, box-shadow .2s ease;
        }

            .add-to-cart-btn:hover {
                filter: brightness(1.06);
                transform: translateY(-2px);
                box-shadow: 0 8px 24px rgba(0,0,0,.5);
            }

        /* Respect your original breakpoints (sizes unchanged) */
        @@media (max-width: 768px) {
            .products-grid

        {
            gap: 1.2rem;
        }

        }
        @@media (max-width: 480px) {
            .category-title

        {
            font-size: 1.75rem;
        }

        }

        /* Sheen animation */
        @@keyframes sweep {
            0%

        {
            transform: translateX(-25%);
        }

        100% {
            transform: translateX(25%);
        }

        }
    </style>

</head>

<body>

    <section class="category-section">

        <h2 class="category-title">@Model.Category</h2>

        @if (Model.Products != null && Model.Products.Any())
        {
            <div class="products-grid">
                @foreach (var product in Model.Products)
                {
                    <div class="product-card">

                        <div class="product-image-container">
                            <img src="@((product.ModelNumber != null)
                                                                 ? $"https://cybershopee1.blob.core.windows.net/productimages/{product.ModelNumber}.png"
                                                                 : "https://placehold.co/400x300")"
                         class="product-image" />
                </div>

                        <div class="product-details">
                            <h3 class="product-name">@product.ModelName</h3>
                            <p class="product-description">@product.Description</p>
                            <div class="product-price">$@product.UnitCost</div>

                    @if (Context.Session.GetString("FullName") != null)
                            {
                                <form asp-controller="ShoppingCart" asp-action="AddToCart" method="post">
                                    <input type="hidden" name="productId" value="@product.ProductId" />
                                    <button class="add-to-cart-btn">Add to Cart</button>
                                </form>
                            }
                        </div>

                    </div>
                }
            </div>
        }
        else
        {
            <div style="color:white; font-size:1.5rem; text-align:center; margin-top:2rem;">
                No products available in this category.
            </div>
        }

    </section>

</body>
</html>